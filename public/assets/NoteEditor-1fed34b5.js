import{c as J,r as E,a8 as Et,Z as $t,j as N,A as sr,T as ar,I as ur,J as cr,a9 as dr}from"./index-c793fbcf.js";import{L as v,b as k,a as gr,c as Tt}from"./LexicalHtml-bc570db1.js";import{B as hr}from"./Button-e53a62c1.js";const fr=J("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]),pr=J("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),mr=J("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]),_r=J("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),Cr=J("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]),Nr=J("Subscript",[["path",{d:"m4 5 8 8",key:"1eunvl"}],["path",{d:"m12 5-8 8",key:"1ah0jp"}],["path",{d:"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07",key:"e8ta8j"}]]),Er=J("Superscript",[["path",{d:"m4 19 8-8",key:"hr47gm"}],["path",{d:"m12 19-8-8",key:"1dhhmo"}],["path",{d:"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06",key:"1dfcux"}]]),$r=J("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);var vt={},ve={},Rt=E;function Tr(r){let e=new URLSearchParams;e.append("code",r);for(let t=1;t<arguments.length;t++)e.append("v",arguments[t]);throw Error(`Minified Lexical error #${r}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let xt=Rt.createContext(null);ve.LexicalComposerContext=xt;ve.createLexicalComposerContext=function(r,e){let t=null;return r!=null&&(t=r[1]),{getTheme:function(){return e??(t!=null?t.getTheme():null)}}};ve.useLexicalComposerContext=function(){let r=Rt.useContext(xt);return r==null&&Tr(8),r};const vr=ve;var M=vr,Rr=M,xr=E;vt.AutoFocusPlugin=function({defaultSelection:r}){let[e]=Rr.useLexicalComposerContext();return xr.useEffect(()=>{e.focus(()=>{let t=document.activeElement,n=e.getRootElement();n===null||t!==null&&n.contains(t)||n.focus({preventScroll:!0})},{defaultSelection:r})},[r,e]),null};const Or=vt;var Dr=Or,Ot={},S={},C=v,G=k;function ie(r){let e=new URLSearchParams;e.append("code",r);for(let t=1;t<arguments.length;t++)e.append("v",arguments[t]);throw Error(`Minified Lexical error #${r}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Dt(r){let e=1;for(r=r.getParent();r!=null;){if(R(r)){if(r=r.getParent(),p(r)){e++,r=r.getParent();continue}ie(40)}break}return e}function Me(r){r=r.getParent(),p(r)||ie(40);let e=r;for(;e!==null;)e=e.getParent(),p(e)&&(r=e);return r}function yt(r){let e=[];r=r.getChildren().filter(R);for(let t=0;t<r.length;t++){let n=r[t],i=n.getFirstChild();p(i)?e=e.concat(yt(i)):e.push(n)}return e}function F(r){return R(r)&&p(r.getFirstChild())}function yr(r){for(;r.getNextSibling()==null&&r.getPreviousSibling()==null;){let e=r.getParent();if(e==null||!R(r)&&!p(r))break;r=e}r.remove()}function Ze(r){return L().append(r)}function Mt(r,e){return R(r)&&(e.length===0||e.length===1&&r.is(e[0])&&r.getChildrenSize()===0)}function b(r,e){r.splice(r.getChildrenSize(),0,e)}function Qe(r,e){if(p(r))return r;let t=r.getPreviousSibling(),n=r.getNextSibling(),i=L();return i.setFormat(r.getFormatType()),i.setIndent(r.getIndent()),b(i,r.getChildren()),p(t)&&e===t.getListType()?(t.append(i),r.remove(),p(n)&&e===n.getListType()&&(b(t,n.getChildren()),n.remove()),t):p(n)&&e===n.getListType()?(n.getFirstChildOrThrow().insertBefore(i),r.remove(),n):(e=y(e),e.append(i),r.replace(e),O(e),e)}function St(r,e){var t=r.getLastChild();let n=e.getFirstChild();t&&n&&F(t)&&F(n)&&(St(t.getFirstChild(),n.getFirstChild()),n.remove()),t=e.getChildren(),0<t.length&&(r.append(...t),O(r)),e.remove()}function O(r,e){if(r=e||r.getChildren(),r!==void 0)for(e=0;e<r.length;e++){let o=r[e];if(R(o)){let l=o.getValue();var t=o,n=t.getParent(),i=1;for(n!=null&&(p(n)?i=n.getStart():ie(44)),t=t.getPreviousSiblings(),n=0;n<t.length;n++){let s=t[n];R(s)&&!p(s.getFirstChild())&&i++}l!==i&&o.setValue(i)}}}function Mr(r){if(!F(r)){var e=r.getParent(),t=e?e.getParent():void 0,n=t?t.getParent():void 0;if(p(n)&&R(t)&&p(e)){var i=e?e.getFirstChild():void 0,o=e?e.getLastChild():void 0;if(r.is(i))t.insertBefore(r),e.isEmpty()&&t.remove();else if(r.is(o))t.insertAfter(r),e.isEmpty()&&t.remove();else{var l=e.getListType();i=L();let s=y(l);i.append(s),r.getPreviousSiblings().forEach(c=>s.append(c)),o=L(),l=y(l),o.append(l),b(l,r.getNextSiblings()),t.insertBefore(i),t.insertAfter(o),t.replace(r)}O(e),O(n)}}}let Re=class At extends C.ElementNode{static getType(){return"listitem"}static clone(e){return new At(e.__value,e.__checked,e.__key)}constructor(e,t,n){super(n),this.__value=e===void 0?1:e,this.__checked=t}createDOM(e){let t=document.createElement("li"),n=this.getParent();return p(n)&&n.getListType()==="check"&&et(t,this,null),t.value=this.__value,be(t,e.theme,this),t}updateDOM(e,t,n){let i=this.getParent();return p(i)&&i.getListType()==="check"&&et(t,this,e),t.value=this.__value,be(t,n.theme,this),!1}static transform(){return e=>{let t=e.getParent();p(t)&&(O(t),t.getListType()!=="check"&&e.getChecked()!=null&&e.setChecked(void 0))}}static importDOM(){return{li:()=>({conversion:Sr,priority:0})}}static importJSON(e){let t=L();return t.setChecked(e.checked),t.setValue(e.value),t.setFormat(e.format),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),type:"listitem",value:this.getValue(),version:1}}append(...e){for(let t=0;t<e.length;t++){let n=e[t];if(C.$isElementNode(n)&&this.canMergeWith(n)){let i=n.getChildren();this.append(...i),n.remove()}else super.append(n)}return this}replace(e,t){if(R(e))return super.replace(e);this.setIndent(0);let n=this.getParentOrThrow();if(!p(n))return e;if(n.__first===this.getKey())n.insertBefore(e);else if(n.__last===this.getKey())n.insertAfter(e);else{let i=y(n.getListType()),o=this.getNextSibling();for(;o;){let l=o;o=o.getNextSibling(),i.append(l)}n.insertAfter(e),e.insertAfter(i)}return t&&this.getChildren().forEach(i=>{e.append(i)}),this.remove(),n.getChildrenSize()===0&&n.remove(),e}insertAfter(e,t=!0){var n=this.getParentOrThrow();p(n)||ie(39);var i=this.getNextSiblings();if(R(e))return t=super.insertAfter(e,t),e=e.getParentOrThrow(),p(e)&&O(e),t;if(p(e)){for(n=e,e=e.getChildren(),i=e.length-1;0<=i;i--)n=e[i],this.insertAfter(n,t);return n}if(n.insertAfter(e,t),i.length!==0){let o=y(n.getListType());i.forEach(l=>o.append(l)),e.insertAfter(o,t)}return e}remove(e){let t=this.getPreviousSibling(),n=this.getNextSibling();super.remove(e),t&&n&&F(t)&&F(n)?(St(t.getFirstChild(),n.getFirstChild()),n.remove()):n&&(e=n.getParent(),p(e)&&O(e))}insertNewAfter(e,t=!0){return e=L(this.__checked==null?void 0:!1),this.insertAfter(e,t),e}collapseAtStart(e){let t=C.$createParagraphNode();this.getChildren().forEach(l=>t.append(l));var n=this.getParentOrThrow(),i=n.getParentOrThrow();let o=R(i);return n.getChildrenSize()===1?o?(n.remove(),i.select()):(n.insertBefore(t),n.remove(),n=e.anchor,e=e.focus,i=t.getKey(),n.type==="element"&&n.getNode().is(this)&&n.set(i,n.offset,"element"),e.type==="element"&&e.getNode().is(this)&&e.set(i,e.offset,"element")):(n.insertBefore(t),this.remove()),!0}getValue(){return this.getLatest().__value}setValue(e){this.getWritable().__value=e}getChecked(){return this.getLatest().__checked}setChecked(e){this.getWritable().__checked=e}toggleChecked(){this.setChecked(!this.__checked)}getIndent(){var e=this.getParent();if(e===null)return this.getLatest().__indent;e=e.getParentOrThrow();let t=0;for(;R(e);)e=e.getParentOrThrow().getParentOrThrow(),t++;return t}setIndent(e){typeof e=="number"&&-1<e||ie(117);let t=this.getIndent();for(;t!==e;)if(t<e){e:{var n=new Set;if(F(this)||n.has(this.getKey()))break e;let s=this.getParent();var i=this.getNextSibling(),o=this.getPreviousSibling();if(F(i)&&F(o)){if(o=o.getFirstChild(),p(o)){o.append(this);var l=i.getFirstChild();p(l)&&(l=l.getChildren(),b(o,l),i.remove(),n.add(i.getKey())),O(o)}}else F(i)?(i=i.getFirstChild(),p(i)&&(n=i.getFirstChild(),n!==null&&n.insertBefore(this),O(i))):F(o)?(i=o.getFirstChild(),p(i)&&(i.append(this),O(i))):p(s)&&(n=L(),l=y(s.getListType()),n.append(l),l.append(this),o?o.insertAfter(n):i?i.insertBefore(n):s.append(n),O(l));p(s)&&O(s)}t++}else Mr(this),t--;return this}insertBefore(e){if(R(e)){let t=this.getParentOrThrow();if(p(t)){let n=this.getNextSiblings();O(t,n)}}return super.insertBefore(e)}canInsertAfter(e){return R(e)}canReplaceWith(e){return R(e)}canMergeWith(e){return C.$isParagraphNode(e)||R(e)}extractWithChild(e,t){if(!C.$isRangeSelection(t))return!1;e=t.anchor.getNode();let n=t.focus.getNode();return this.isParentOf(e)&&this.isParentOf(n)&&this.getTextContent().length===t.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return y("bullet")}};function be(r,e,t){let n=[],i=[];var o=(e=e.list)?e.listitem:void 0;if(e&&e.nested)var l=e.nested.listitem;if(o!==void 0&&(o=o.split(" "),n.push(...o)),e){o=t.getParent(),o=p(o)&&o.getListType()==="check";let s=t.getChecked();o&&!s||i.push(e.listitemUnchecked),o&&s||i.push(e.listitemChecked),o&&n.push(s?e.listitemChecked:e.listitemUnchecked)}l!==void 0&&(l=l.split(" "),t.getChildren().some(s=>p(s))?n.push(...l):i.push(...l)),0<i.length&&G.removeClassNamesFromElement(r,...i),0<n.length&&G.addClassNamesToElement(r,...n)}function et(r,e,t){p(e.getFirstChild())?(r.removeAttribute("role"),r.removeAttribute("tabIndex"),r.removeAttribute("aria-checked")):(r.setAttribute("role","checkbox"),r.setAttribute("tabIndex","-1"),t&&e.__checked===t.__checked||r.setAttribute("aria-checked",e.getChecked()?"true":"false"))}function Sr(r){return r=G.isHTMLElement(r)&&r.getAttribute("aria-checked")==="true",{node:L(r)}}function L(r){return C.$applyNodeReplacement(new Re(void 0,r))}function R(r){return r instanceof Re}let Ke=class Lt extends C.ElementNode{static getType(){return"list"}static clone(e){return new Lt(e.__listType||nt[e.__tag],e.__start,e.__key)}constructor(e,t,n){super(n),this.__listType=e=nt[e]||e,this.__tag=e==="number"?"ol":"ul",this.__start=t}getTag(){return this.__tag}setListType(e){let t=this.getWritable();t.__listType=e,t.__tag=e==="number"?"ol":"ul"}getListType(){return this.__listType}getStart(){return this.__start}createDOM(e){let t=document.createElement(this.__tag);return this.__start!==1&&t.setAttribute("start",String(this.__start)),t.__lexicalListType=this.__listType,tt(t,e.theme,this),t}updateDOM(e,t,n){return e.__tag!==this.__tag?!0:(tt(t,n.theme,this),!1)}static importDOM(){return{ol:()=>({conversion:rt,priority:0}),ul:()=>({conversion:rt,priority:0})}}static importJSON(e){let t=y(e.listType,e.start);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportDOM(e){return{element:e}=super.exportDOM(e),e&&G.isHTMLElement(e)&&(this.__start!==1&&e.setAttribute("start",String(this.__start)),this.__listType==="check"&&e.setAttribute("__lexicalListType","check")),{element:e}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag(),type:"list",version:1}}canBeEmpty(){return!1}canIndent(){return!1}append(...e){for(let n=0;n<e.length;n++){var t=e[n];if(R(t))super.append(t);else{let i=L();p(t)||C.$isElementNode(t)&&(t=C.$createTextNode(t.getTextContent())),i.append(t),super.append(i)}}return O(this),this}extractWithChild(e){return R(e)}};function tt(r,e,t){let n=[],i=[];var o=e.list;if(o!==void 0){let s=o[`${t.__tag}Depth`]||[];e=Dt(t)-1;let c=e%s.length;var l=s[c];let u=o[t.__tag],g;if(o=o.nested,o!==void 0&&o.list&&(g=o.list),u!==void 0&&n.push(u),l!==void 0)for(l=l.split(" "),n.push(...l),l=0;l<s.length;l++)l!==c&&i.push(t.__tag+l);g!==void 0&&(t=g.split(" "),1<e?n.push(...t):i.push(...t))}0<i.length&&G.removeClassNamesFromElement(r,...i),0<n.length&&G.addClassNamesToElement(r,...n)}function Ar(r){let e=[];for(let n=0;n<r.length;n++){var t=r[n];R(t)?(e.push(t),t=t.getChildren(),1<t.length&&t.forEach(i=>{p(i)&&e.push(Ze(i))})):e.push(Ze(t))}return e}function rt(r){let e=r.nodeName.toLowerCase(),t=null;return e==="ol"?t=y("number",r.start):e==="ul"&&(t=G.isHTMLElement(r)&&r.getAttribute("__lexicallisttype")==="check"?y("check"):y("bullet")),{after:Ar,node:t}}let nt={ol:"number",ul:"bullet"};function y(r,e=1){return C.$applyNodeReplacement(new Ke(r,e))}function p(r){return r instanceof Ke}let Lr=C.createCommand("INSERT_UNORDERED_LIST_COMMAND"),Pr=C.createCommand("INSERT_ORDERED_LIST_COMMAND"),Ir=C.createCommand("INSERT_CHECK_LIST_COMMAND"),wr=C.createCommand("REMOVE_LIST_COMMAND");S.$createListItemNode=L;S.$createListNode=y;S.$getListDepth=Dt;S.$handleListInsertParagraph=function(){var r=C.$getSelection();if(!C.$isRangeSelection(r)||!r.isCollapsed()||(r=r.anchor.getNode(),!R(r)||r.getChildrenSize()!==0))return!1;var e=Me(r),t=r.getParent();p(t)||ie(40);let n=t.getParent(),i;if(C.$isRootOrShadowRoot(n))i=C.$createParagraphNode(),e.insertAfter(i);else if(R(n))i=L(),n.insertAfter(i);else return!1;if(i.select(),e=r.getNextSiblings(),0<e.length){let o=y(t.getListType());C.$isParagraphNode(i)?i.insertAfter(o):(t=L(),t.append(o),i.insertAfter(t)),e.forEach(l=>{l.remove(),o.append(l)})}return yr(r),!0};S.$isListItemNode=R;S.$isListNode=p;S.INSERT_CHECK_LIST_COMMAND=Ir;S.INSERT_ORDERED_LIST_COMMAND=Pr;S.INSERT_UNORDERED_LIST_COMMAND=Lr;S.ListItemNode=Re;S.ListNode=Ke;S.REMOVE_LIST_COMMAND=wr;S.insertList=function(r,e){r.update(()=>{var t=C.$getSelection();if(C.$isRangeSelection(t)||C.DEPRECATED_$isGridSelection(t)){var n=t.getNodes();t=t.anchor.getNode();var i=t.getParent();if(Mt(t,n))n=y(e),C.$isRootOrShadowRoot(i)?(t.replace(n),i=L(),C.$isElementNode(t)&&(i.setFormat(t.getFormatType()),i.setIndent(t.getIndent())),n.append(i)):R(t)&&(t=t.getParentOrThrow(),b(n,t.getChildren()),t.replace(n));else for(t=new Set,i=0;i<n.length;i++){var o=n[i];if(C.$isElementNode(o)&&o.isEmpty()&&!t.has(o.getKey()))Qe(o,e);else if(C.$isLeafNode(o))for(o=o.getParent();o!=null;){let s=o.getKey();if(p(o)){if(!t.has(s)){var l=y(e);b(l,o.getChildren()),o.replace(l),O(l),t.add(s)}break}else{if(l=o.getParent(),C.$isRootOrShadowRoot(l)&&!t.has(s)){t.add(s),Qe(o,e);break}o=l}}}}})};S.removeList=function(r){r.update(()=>{let e=C.$getSelection();if(C.$isRangeSelection(e)){var t=new Set,n=e.getNodes(),i=e.anchor.getNode();if(Mt(i,n))t.add(Me(i));else for(i=0;i<n.length;i++){var o=n[i];C.$isLeafNode(o)&&(o=G.$getNearestNodeOfType(o,Re),o!=null&&t.add(Me(o)))}for(let l of t){t=l,n=yt(l);for(let s of n)n=C.$createParagraphNode(),b(n,s.getChildren()),t.insertAfter(n),t=n,s.__key===e.anchor.key&&e.anchor.set(n.getKey(),0,"element"),s.__key===e.focus.key&&e.focus.set(n.getKey(),0,"element"),s.remove();l.remove()}}})};const kr=S;var Fr=kr,H=Fr,Kr=M,Ee=k,x=v,Hr=E;function Pt(r,e){let t=r.target;if(t!==null&&Ee.isHTMLElement(t)){var n=t.firstChild;(n==null||!Ee.isHTMLElement(n)||n.tagName!=="UL"&&n.tagName!=="OL")&&(n=t.parentNode)&&n.__lexicalListType==="check"&&(r=r.pageX,n=t.getBoundingClientRect(),(t.dir==="rtl"?r<n.right&&r>n.right-20:r>n.left&&r<n.left+20)&&e())}}function it(r){Pt(r,()=>{let e=r.target,t=Yr(e);t!=null&&t.isEditable()&&t.update(()=>{if(r.target){let n=x.$getNearestNodeFromDOMNode(e);H.$isListItemNode(n)&&(e.focus(),n.toggleChecked())}})})}function ot(r){Pt(r,()=>{r.preventDefault()})}function Yr(r){for(;r;){if(r.__lexicalEditor)return r.__lexicalEditor;r=r.parentNode}return null}function Se(){let r=document.activeElement;return r!=null&&r.tagName==="LI"&&r.parentNode!=null&&r.parentNode.__lexicalListType==="check"?r:null}function Br(r,e){let t=e?r.getPreviousSibling():r.getNextSibling();for(;t==null&&H.$isListItemNode(r);)r=r.getParentOrThrow().getParent(),r!=null&&(t=e?r.getPreviousSibling():r.getNextSibling());for(;H.$isListItemNode(t);){if(r=e?t.getLastChild():t.getFirstChild(),!H.$isListNode(r))return t;t=e?r.getLastChild():r.getFirstChild()}return null}function lt(r,e,t){let n=Se();return n!=null&&e.update(()=>{var i=x.$getNearestNodeFromDOMNode(n);if(H.$isListItemNode(i)&&(i=Br(i,t),i!=null)){i.selectStart();let o=e.getElementByKey(i.__key);o!=null&&(r.preventDefault(),setTimeout(()=>{o.focus()},0))}}),!1}Ot.CheckListPlugin=function(){let[r]=Kr.useLexicalComposerContext();return Hr.useEffect(()=>Ee.mergeRegister(r.registerCommand(H.INSERT_CHECK_LIST_COMMAND,()=>(H.insertList(r,"check"),!0),x.COMMAND_PRIORITY_LOW),r.registerCommand(x.KEY_ARROW_DOWN_COMMAND,e=>lt(e,r,!1),x.COMMAND_PRIORITY_LOW),r.registerCommand(x.KEY_ARROW_UP_COMMAND,e=>lt(e,r,!0),x.COMMAND_PRIORITY_LOW),r.registerCommand(x.KEY_ESCAPE_COMMAND,()=>{if(Se()!=null){let e=r.getRootElement();return e!=null&&e.focus(),!0}return!1},x.COMMAND_PRIORITY_LOW),r.registerCommand(x.KEY_SPACE_COMMAND,e=>{let t=Se();return t!=null&&r.isEditable()?(r.update(()=>{let n=x.$getNearestNodeFromDOMNode(t);H.$isListItemNode(n)&&(e.preventDefault(),n.toggleChecked())}),!0):!1},x.COMMAND_PRIORITY_LOW),r.registerCommand(x.KEY_ARROW_LEFT_COMMAND,e=>r.getEditorState().read(()=>{var t=x.$getSelection();if(x.$isRangeSelection(t)&&t.isCollapsed()){var{anchor:n}=t;if((t=n.type==="element")||n.offset===0){n=n.getNode();let i=Ee.$findMatchingParent(n,o=>x.$isElementNode(o)&&!o.isInline());if(H.$isListItemNode(i)){let o=i.getParent();if(H.$isListNode(o)&&o.getListType()==="check"&&(t||i.getFirstDescendant()===n)&&(t=r.getElementByKey(i.__key),t!=null&&document.activeElement!==t))return t.focus(),e.preventDefault(),!0}}}return!1}),x.COMMAND_PRIORITY_LOW),r.registerRootListener((e,t)=>{e!==null&&(e.addEventListener("click",it),e.addEventListener("pointerdown",ot)),t!==null&&(t.removeEventListener("click",it),t.removeEventListener("pointerdown",ot))}))),null};const zr=Ot;var jr=zr,U={},It=k,B=v;let Ur=new Set(["http:","https:","mailto:","sms:","tel:"]),xe=class wt extends B.ElementNode{static getType(){return"link"}static clone(e){return new wt(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}constructor(e,t={},n){super(n);let{target:i=null,rel:o=null,title:l=null}=t;this.__url=e,this.__target=i,this.__rel=o,this.__title=l}createDOM(e){let t=document.createElement("a");return t.href=this.sanitizeUrl(this.__url),this.__target!==null&&(t.target=this.__target),this.__rel!==null&&(t.rel=this.__rel),this.__title!==null&&(t.title=this.__title),It.addClassNamesToElement(t,e.theme.link),t}updateDOM(e,t){let n=this.__url,i=this.__target,o=this.__rel,l=this.__title;return n!==e.__url&&(t.href=n),i!==e.__target&&(i?t.target=i:t.removeAttribute("target")),o!==e.__rel&&(o?t.rel=o:t.removeAttribute("rel")),l!==e.__title&&(l?t.title=l:t.removeAttribute("title")),!1}static importDOM(){return{a:()=>({conversion:Wr,priority:1})}}static importJSON(e){let t=ge(e.url,{rel:e.rel,target:e.target,title:e.title});return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}sanitizeUrl(e){try{let t=new URL(e);if(!Ur.has(t.protocol))return"about:blank"}catch{}return e}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),type:"link",url:this.getURL(),version:1}}getURL(){return this.getLatest().__url}setURL(e){this.getWritable().__url=e}getTarget(){return this.getLatest().__target}setTarget(e){this.getWritable().__target=e}getRel(){return this.getLatest().__rel}setRel(e){this.getWritable().__rel=e}getTitle(){return this.getLatest().__title}setTitle(e){this.getWritable().__title=e}insertNewAfter(e,t=!0){return e=this.getParentOrThrow().insertNewAfter(e,t),B.$isElementNode(e)?(t=ge(this.__url,{rel:this.__rel,target:this.__target,title:this.__title}),e.append(t),t):null}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t){if(!B.$isRangeSelection(t))return!1;e=t.anchor.getNode();let n=t.focus.getNode();return this.isParentOf(e)&&this.isParentOf(n)&&0<t.getTextContent().length}};function Wr(r){let e=null;if(It.isHTMLAnchorElement(r)){let t=r.textContent;t!==null&&t!==""&&(e=ge(r.getAttribute("href")||"",{rel:r.getAttribute("rel"),target:r.getAttribute("target"),title:r.getAttribute("title")}))}return{node:e}}function ge(r,e){return B.$applyNodeReplacement(new xe(r,e))}function Z(r){return r instanceof xe}let He=class kt extends xe{static getType(){return"autolink"}static clone(e){return new kt(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}static importJSON(e){let t=Ae(e.url,{rel:e.rel,target:e.target,title:e.title});return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),type:"autolink",version:1}}insertNewAfter(e,t=!0){return e=this.getParentOrThrow().insertNewAfter(e,t),B.$isElementNode(e)?(t=Ae(this.__url,{rel:this._rel,target:this.__target,title:this.__title}),e.append(t),t):null}};function Ae(r,e){return B.$applyNodeReplacement(new He(r,e))}let Gr=B.createCommand("TOGGLE_LINK_COMMAND");function Jr(r,e){for(;r!==null&&(r=r.getParent())!==null&&!e(r););return r}U.$createAutoLinkNode=Ae;U.$createLinkNode=ge;U.$isAutoLinkNode=function(r){return r instanceof He};U.$isLinkNode=Z;U.AutoLinkNode=He;U.LinkNode=xe;U.TOGGLE_LINK_COMMAND=Gr;U.toggleLink=function(r,e={}){let{target:t,title:n}=e,i=e.rel===void 0?"noreferrer":e.rel;if(e=B.$getSelection(),B.$isRangeSelection(e))if(e=e.extract(),r===null)e.forEach(l=>{if(l=l.getParent(),Z(l)){let s=l.getChildren();for(let c=0;c<s.length;c++)l.insertBefore(s[c]);l.remove()}});else{if(e.length===1){var o=e[0];if(o=Z(o)?o:Jr(o,Z),o!==null){o.setURL(r),t!==void 0&&o.setTarget(t),i!==null&&o.setRel(i),n!==void 0&&o.setTitle(n);return}}let l=null,s=null;e.forEach(c=>{var u=c.getParent();if(u!==s&&u!==null&&(!B.$isElementNode(c)||c.isInline()))if(Z(u))s=u,u.setURL(r),t!==void 0&&u.setTarget(t),i!==null&&s.setRel(i),n!==void 0&&s.setTitle(n);else if(u.is(l)||(l=u,s=ge(r,{rel:i,target:t}),Z(u)?c.getPreviousSibling()===null?u.insertBefore(s):u.insertAfter(s):c.insertBefore(s)),Z(c)){if(!c.is(s)){if(s!==null){u=c.getChildren();for(let g=0;g<u.length;g++)s.append(u[g])}c.remove()}}else s!==null&&s.append(c)})}};const qr=U;var Xr=qr,Vr=Xr,Zr=M,st=k,le=v,Qr=E,br=function({newTab:r=!0}){let[e]=Zr.useLexicalComposerContext();return Qr.useEffect(()=>{let t=i=>{const o=i.target;if(o instanceof Node){var l=le.getNearestEditorFromDOMNode(o);if(l!==null){var s=null,c=null;l.update(()=>{var u=le.$getNearestNodeFromDOMNode(o);if(u!==null)if(u=st.$findMatchingParent(u,le.$isElementNode),Vr.$isLinkNode(u))s=u.getURL(),c=u.getTarget();else{e:{u=st.isHTMLAnchorElement;let g=o;for(;g!=null;){if(u(g)){u=g;break e}g=g.parentNode}u=null}u!==null&&(s=u.href,c=u.target)}}),s!==null&&s!==""&&(l=e.getEditorState().read(le.$getSelection),(!le.$isRangeSelection(l)||l.isCollapsed())&&(l=i.type==="auxclick"&&i.button===1,window.open(s,r||l||i.metaKey||i.ctrlKey||c==="_blank"?"_blank":"_self")),i.preventDefault())}}},n=i=>{i.button===1&&e.isEditable()&&t(i)};return e.registerRootListener((i,o)=>{o!==null&&(o.removeEventListener("click",t),o.removeEventListener("mouseup",n)),i!==null&&(i.addEventListener("click",t),i.addEventListener("mouseup",n))})},[e,r]),null};const en=br;var tn=en;const rn=Et(tn);var Ft={},at=M,se=v,$e=E;let Kt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";var nn=Kt?$e.useLayoutEffect:$e.useEffect;let fe={tag:"history-merge"};function on(r,e){if(e!==null){if(e===void 0)r.update(()=>{var t=se.$getRoot();if(t.isEmpty()){let n=se.$createParagraphNode();t.append(n),t=Kt?document.activeElement:null,(se.$getSelection()!==null||t!==null&&t===r.getRootElement())&&n.select()}},fe);else if(e!==null)switch(typeof e){case"string":let t=r.parseEditorState(e);r.setEditorState(t,fe);break;case"object":r.setEditorState(e,fe);break;case"function":r.update(()=>{se.$getRoot().isEmpty()&&e(r)},fe)}}}Ft.LexicalComposer=function({initialConfig:r,children:e}){let t=$e.useMemo(()=>{const{theme:n,namespace:i,editor__DEPRECATED:o,nodes:l,onError:s,editorState:c}=r,u=at.createLexicalComposerContext(null,n);let g=o||null;if(g===null){const d=se.createEditor({editable:r.editable,namespace:i,nodes:l,onError:m=>s(m,d),theme:n});on(d,c),g=d}return[g,u]},[]);return nn(()=>{let n=r.editable,[i]=t;i.setEditable(n!==void 0?n:!0)},[]),$e.createElement(at.LexicalComposerContext.Provider,{value:t},e)};const ln=Ft;var sn=ln,ue=E;function Le(r,e){return Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Le(r,e)}function an(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,Le(r,e)}function un(r,e){return r===void 0&&(r=[]),e===void 0&&(e=[]),r.length!==e.length||r.some(function(t,n){return!Object.is(t,e[n])})}var ut={error:null},cn=function(r){function e(){for(var n,i=arguments.length,o=Array(i),l=0;l<i;l++)o[l]=arguments[l];return n=r.call.apply(r,[this].concat(o))||this,n.state=ut,n.resetErrorBoundary=function(){for(var s,c=arguments.length,u=Array(c),g=0;g<c;g++)u[g]=arguments[g];n.props.onReset==null||(s=n.props).onReset.apply(s,u),n.reset()},n}an(e,r),e.getDerivedStateFromError=function(n){return{error:n}};var t=e.prototype;return t.reset=function(){this.setState(ut)},t.componentDidCatch=function(n,i){var o,l;(o=(l=this.props).onError)==null||o.call(l,n,i)},t.componentDidUpdate=function(n,i){var o=this.props.resetKeys;if(this.state.error!==null&&i.error!==null&&un(n.resetKeys,o)){var l,s;(l=(s=this.props).onResetKeysChange)==null||l.call(s,n.resetKeys,o),this.reset()}},t.render=function(){var n=this.state.error,i=this.props,o=i.fallbackRender,l=i.FallbackComponent;if(i=i.fallback,n!==null){if(n={error:n,resetErrorBoundary:this.resetErrorBoundary},ue.isValidElement(i))return i;if(typeof o=="function")return o(n);if(l)return ue.createElement(l,n);throw Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},e}(ue.Component),dn=function({children:r,onError:e}){return ue.createElement(cn,{fallback:ue.createElement("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"}},"An error was thrown."),onError:e},r)};const gn=dn;var hn=gn;const fn=Et(hn);var Ye={},Be={},pn=k,$=v;function mn(r,e,t,n,i){if(r===null||t.size===0&&n.size===0&&!i)return 0;var o=e._selection,l=r._selection;if(i)return 1;if(!($.$isRangeSelection(o)&&$.$isRangeSelection(l)&&l.isCollapsed()&&o.isCollapsed()))return 0;i=e._nodeMap;let s=[];for(let c of t)t=i.get(c),t!==void 0&&s.push(t);for(let[c,u]of n)u&&(n=i.get(c),n===void 0||$.$isRootNode(n)||s.push(n));return s.length===0?0:1<s.length?(n=e._nodeMap,e=n.get(o.anchor.key),l=n.get(l.anchor.key),e&&l&&!r._nodeMap.has(e.__key)&&$.$isTextNode(e)&&e.__text.length===1&&o.anchor.offset===1?2:0):(e=s[0],r=r._nodeMap.get(e.__key),!$.$isTextNode(r)||!$.$isTextNode(e)||r.__mode!==e.__mode||(r=r.__text,e=e.__text,r===e)||(o=o.anchor,l=l.anchor,o.key!==l.key||o.type!=="text")?0:(o=o.offset,l=l.offset,r=e.length-r.length,r===1&&l===o-1?2:r===-1&&l===o+1?3:r===-1&&l===o?4:0))}function _n(r,e){let t=Date.now(),n=0;return(i,o,l,s,c,u)=>{let g=Date.now();if(u.has("historic"))return n=0,t=g,2;let d=mn(i,o,s,c,r.isComposing()),m=(()=>{var f=l===null||l.editor===r,_=u.has("history-push");if(!_&&f&&u.has("history-merge"))return 0;if(i===null)return 1;var T=o._selection;if(!(0<s.size||0<c.size))return T!==null?0:2;if(_===!1&&d!==0&&d===n&&g<t+e&&f)return 0;if(s.size===1){{_=Array.from(s)[0],f=i._nodeMap.get(_),_=o._nodeMap.get(_),T=i._selection;let A=o._selection,X=!1;$.$isRangeSelection(T)&&$.$isRangeSelection(A)&&(X=T.anchor.type==="element"&&T.focus.type==="element"&&A.anchor.type==="text"&&A.focus.type==="text"),f=!X&&$.$isTextNode(f)&&$.$isTextNode(_)?f.__type===_.__type&&f.__text===_.__text&&f.__mode===_.__mode&&f.__detail===_.__detail&&f.__style===_.__style&&f.__format===_.__format&&f.__parent===_.__parent:!1}if(f)return 0}return 1})();return t=g,n=d,m}}Be.createEmptyHistoryState=function(){return{current:null,redoStack:[],undoStack:[]}};Be.registerHistory=function(r,e,t){let n=_n(r,t);t=({editorState:l,prevEditorState:s,dirtyLeaves:c,dirtyElements:u,tags:g})=>{const d=e.current,m=e.redoStack,f=e.undoStack,_=d===null?null:d.editorState;if(d===null||l!==_){if(s=n(s,l,d,c,u,g),s===1)m.length!==0&&(e.redoStack=[],r.dispatchCommand($.CAN_REDO_COMMAND,!1)),d!==null&&(f.push({...d}),r.dispatchCommand($.CAN_UNDO_COMMAND,!0));else if(s===2)return;e.current={editor:r,editorState:l}}};let i=pn.mergeRegister(r.registerCommand($.UNDO_COMMAND,()=>{let l=e.redoStack,s=e.undoStack;if(s.length!==0){let c=e.current,u=s.pop();c!==null&&(l.push(c),r.dispatchCommand($.CAN_REDO_COMMAND,!0)),s.length===0&&r.dispatchCommand($.CAN_UNDO_COMMAND,!1),e.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:"historic"})}return!0},$.COMMAND_PRIORITY_EDITOR),r.registerCommand($.REDO_COMMAND,()=>{let l=e.redoStack;var s=e.undoStack;if(l.length!==0){let c=e.current;c!==null&&(s.push(c),r.dispatchCommand($.CAN_UNDO_COMMAND,!0)),s=l.pop(),l.length===0&&r.dispatchCommand($.CAN_REDO_COMMAND,!1),e.current=s||null,s&&s.editor.setEditorState(s.editorState,{tag:"historic"})}return!0},$.COMMAND_PRIORITY_EDITOR),r.registerCommand($.CLEAR_EDITOR_COMMAND,()=>(e.undoStack=[],e.redoStack=[],e.current=null,!1),$.COMMAND_PRIORITY_EDITOR),r.registerCommand($.CLEAR_HISTORY_COMMAND,()=>(e.undoStack=[],e.redoStack=[],e.current=null,r.dispatchCommand($.CAN_REDO_COMMAND,!1),r.dispatchCommand($.CAN_UNDO_COMMAND,!1),!0),$.COMMAND_PRIORITY_EDITOR),r.registerUpdateListener(t)),o=r.registerUpdateListener(t);return()=>{i(),o()}};const Cn=Be;var Nn=Cn,En=M,Pe=Nn,ct=E;function $n(r,e,t=1e3){let n=ct.useMemo(()=>e||Pe.createEmptyHistoryState(),[e]);ct.useEffect(()=>Pe.registerHistory(r,n,t),[t,r,n])}Ye.createEmptyHistoryState=Pe.createEmptyHistoryState;Ye.HistoryPlugin=function({externalHistoryState:r}){let[e]=En.useLexicalComposerContext();return $n(e,r),null};const Tn=Ye;var vn=Tn,Ht={},he={},Yt={},Rn=M,Q=v,pe=E;function dt(r,e){return r.getEditorState().read(()=>{let t=Q.$getNodeByKey(e);return t===null?!1:t.isSelected()})}Yt.useLexicalNodeSelection=function(r){let[e]=Rn.useLexicalComposerContext(),[t,n]=pe.useState(()=>dt(e,r));pe.useEffect(()=>{let l=!0,s=e.registerUpdateListener(()=>{l&&n(dt(e,r))});return()=>{l=!1,s()}},[e,r]);let i=pe.useCallback(l=>{e.update(()=>{let s=Q.$getSelection();Q.$isNodeSelection(s)||(s=Q.$createNodeSelection(),Q.$setSelection(s)),l?s.add(r):s.delete(r)})},[e,r]),o=pe.useCallback(()=>{e.update(()=>{const l=Q.$getSelection();Q.$isNodeSelection(l)&&l.clear()})},[e]);return[t,i,o]};const xn=Yt;var On=xn,Dn=M,yn=On,Mn=k,P=v,Ne=E;let Sn=P.createCommand("INSERT_HORIZONTAL_RULE_COMMAND");function An({nodeKey:r}){let[e]=Dn.useLexicalComposerContext(),[t,n,i]=yn.useLexicalNodeSelection(r),o=Ne.useCallback(l=>(t&&P.$isNodeSelection(P.$getSelection())&&(l.preventDefault(),l=P.$getNodeByKey(r),zt(l)&&l.remove()),!1),[t,r]);return Ne.useEffect(()=>Mn.mergeRegister(e.registerCommand(P.CLICK_COMMAND,l=>{let s=e.getElementByKey(r);return l.target===s?(l.shiftKey||i(),n(!t),!0):!1},P.COMMAND_PRIORITY_LOW),e.registerCommand(P.KEY_DELETE_COMMAND,o,P.COMMAND_PRIORITY_LOW),e.registerCommand(P.KEY_BACKSPACE_COMMAND,o,P.COMMAND_PRIORITY_LOW)),[i,e,t,r,o,n]),Ne.useEffect(()=>{let l=e.getElementByKey(r);l!==null&&(l.className=t?"selected":"")},[e,t,r]),null}let ze=class Bt extends P.DecoratorNode{static getType(){return"horizontalrule"}static clone(e){return new Bt(e.__key)}static importJSON(){return je()}static importDOM(){return{hr:()=>({conversion:Ln,priority:0})}}exportJSON(){return{type:"horizontalrule",version:1}}exportDOM(){return{element:document.createElement("hr")}}createDOM(){return document.createElement("hr")}getTextContent(){return`
`}isInline(){return!1}updateDOM(){return!1}decorate(){return Ne.createElement(An,{nodeKey:this.__key})}};function Ln(){return{node:je()}}function je(){return P.$applyNodeReplacement(new ze)}function zt(r){return r instanceof ze}he.$createHorizontalRuleNode=je;he.$isHorizontalRuleNode=zt;he.HorizontalRuleNode=ze;he.INSERT_HORIZONTAL_RULE_COMMAND=Sn;const Pn=he;var In=Pn,wn=M,gt=In,kn=k,ye=v,Fn=E;Ht.HorizontalRulePlugin=function(){let[r]=wn.useLexicalComposerContext();return Fn.useEffect(()=>r.registerCommand(gt.INSERT_HORIZONTAL_RULE_COMMAND,()=>{var e=ye.$getSelection();return ye.$isRangeSelection(e)?(e.focus.getNode()!==null&&(e=gt.$createHorizontalRuleNode(),kn.$insertNodeToNearestRoot(e)),!0):!1},ye.COMMAND_PRIORITY_EDITOR),[r]),null};const Kn=Ht;var Hn=Kn,jt={},Yn=M,ce=E,Bn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?ce.useLayoutEffect:ce.useEffect;function zn(r){let[e]=Yn.useLexicalComposerContext(),t=ce.useMemo(()=>r(e),[e,r]),n=ce.useRef(t.initialValueFn()),[i,o]=ce.useState(n.current);return Bn(()=>{let{initialValueFn:l,subscribe:s}=t,c=l();return n.current!==c&&(n.current=c,o(c)),s(u=>{n.current=u,o(u)})},[t,r]),i}function jn(r){return{initialValueFn:()=>r.isEditable(),subscribe:e=>r.registerEditableListener(e)}}var Un=function(){return zn(jn)};const Wn=Un;var Gn=Wn,q={},D=v;function Ue(r,e=!0){return r?!1:(r=Ut(),e&&(r=r.trim()),r==="")}function Ut(){return D.$getRoot().getTextContent()}function Wt(r){if(!Ue(r,!1))return!1;r=D.$getRoot().getChildren();let e=r.length;if(1<e)return!1;for(let n=0;n<e;n++){var t=r[n];if(D.$isDecoratorNode(t))return!1;if(D.$isElementNode(t)){if(!D.$isParagraphNode(t)||t.__indent!==0)return!1;t=t.getChildren();let i=t.length;for(let o=0;o<i;o++)if(!D.$isTextNode(t[n]))return!1}}return!0}q.$canShowPlaceholder=Wt;q.$canShowPlaceholderCurry=function(r){return()=>Wt(r)};q.$findTextIntersectionFromCharacters=function(r,e){var t=r.getFirstChild();r=0;e:for(;t!==null;){if(D.$isElementNode(t)){var n=t.getFirstChild();if(n!==null){t=n;continue}}else if(D.$isTextNode(t)){if(n=t.getTextContentSize(),r+n>e)return{node:t,offset:e-r};r+=n}if(n=t.getNextSibling(),n!==null)t=n;else{for(t=t.getParent();t!==null;){if(n=t.getNextSibling(),n!==null){t=n;continue e}t=t.getParent()}break}}return null};q.$isRootTextContentEmpty=Ue;q.$isRootTextContentEmptyCurry=function(r,e){return()=>Ue(r,e)};q.$rootTextContent=Ut;q.registerLexicalTextEntity=function(r,e,t,n){let i=l=>{const s=D.$createTextNode(l.getTextContent());s.setFormat(l.getFormat()),l.replace(s)},o=r.registerNodeTransform(D.TextNode,l=>{if(l.isSimpleText()){var s=l.getPreviousSibling(),c=l.getTextContent(),u=l;if(D.$isTextNode(s)){var g=s.getTextContent(),d=e(g+c);if(s instanceof t){if(d===null||s.getLatest().__mode!==0){i(s);return}if(d=d.end-g.length,0<d){u=c.slice(0,d),u=g+u,s.select(),s.setTextContent(u),d===c.length?l.remove():(s=c.slice(d),l.setTextContent(s));return}}else if(d===null||d.start<g.length)return}for(;;){if(l=e(c),c=d=l===null?"":c.slice(l.end),d===""){if(g=u.getNextSibling(),D.$isTextNode(g)){if(d=u.getTextContent()+g.getTextContent(),d=e(d),d===null){g instanceof t?i(g):g.markDirty();break}else if(d.start!==0)break}}else if(g=e(d),g!==null&&g.start===0)break;if(l===null)break;if(l.start===0&&D.$isTextNode(s)&&s.isTextEntity())continue;let m;if(l.start===0?[m,u]=u.splitText(l.end):[,m,u]=u.splitText(l.start,l.end),l=n(m),l.setFormat(m.getFormat()),m.replace(l),u==null)break}}});return r=r.registerNodeTransform(t,l=>{var s=l.getTextContent();const c=e(s);c===null||c.start!==0?i(l):s.length>c.end?l.splitText(c.end):(s=l.getPreviousSibling(),D.$isTextNode(s)&&s.isTextEntity()&&(i(s),i(l)),s=l.getNextSibling(),D.$isTextNode(s)&&s.isTextEntity()&&(i(s),l instanceof t&&i(l)))}),[o,r]};const Jn=q;var qn=Jn,Gt={},me=v;Gt.registerDragonSupport=function(r){let e=window.location.origin,t=n=>{if(n.origin===e){var i=r.getRootElement();if(document.activeElement===i&&(i=n.data,typeof i=="string")){try{var o=JSON.parse(i)}catch{return}if(o&&o.protocol==="nuanria_messaging"&&o.type==="request"&&(o=o.payload)&&o.functionId==="makeChanges"&&(o=o.args)){const[l,s,c,u,g]=o;r.update(()=>{const d=me.$getSelection();if(me.$isRangeSelection(d)){var m=d.anchor;let f=m.getNode(),_=0,T=0;me.$isTextNode(f)&&0<=l&&0<=s&&(_=l,T=l+s,d.setTextNodeRange(f,_,f,T)),(_!==T||c!=="")&&(d.insertRawText(c),f=m.getNode()),me.$isTextNode(f)&&(_=u,T=u+g,m=f.getTextContentSize(),_=_>m?m:_,T=T>m?m:T,d.setTextNodeRange(f,_,f,T)),n.stopImmediatePropagation()}})}}}};return window.addEventListener("message",t,!0),()=>{window.removeEventListener("message",t,!0)}};const Xn=Gt;var Vn=Xn,z={},W={},Jt=gr,Ie=Tt,ne=k,h=v;function j(r){let e=new URLSearchParams;e.append("code",r);for(let t=1;t<arguments.length;t++)e.append("v",arguments[t]);throw Error(`Minified Lexical error #${r}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let qt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Xt(r){let e=h.$getSelection();if(e==null)throw Error("Expected valid LexicalSelection");return h.$isRangeSelection(e)&&e.isCollapsed()||e.getNodes().length===0?"":Jt.$generateHtmlFromNodes(r,e)}function Vt(r){let e=h.$getSelection();if(e==null)throw Error("Expected valid LexicalSelection");return h.$isRangeSelection(e)&&e.isCollapsed()||e.getNodes().length===0?null:JSON.stringify(Qt(r,e))}function we(r,e,t){(h.DEPRECATED_$isGridSelection(t)||ne.$findMatchingParent(t.anchor.getNode(),n=>h.DEPRECATED_$isGridCellNode(n))!==null&&ne.$findMatchingParent(t.focus.getNode(),n=>h.DEPRECATED_$isGridCellNode(n))!==null)&&e.length===1&&h.DEPRECATED_$isGridNode(e[0])?Qn(e,t,!1,r):Zn(e,t)}function Zn(r,e){let t=[],n=null;for(let i=0;i<r.length;i++){let o=r[i],l=h.$isLineBreakNode(o);if(l||h.$isDecoratorNode(o)&&o.isInline()||h.$isElementNode(o)&&o.isInline()||h.$isTextNode(o)||o.isParentRequired()){if(n===null&&(n=o.createParentElementNode(),t.push(n),l))continue;n!==null&&n.append(o)}else t.push(o),n=null}h.$isRangeSelection(e)?e.insertNodes(t):h.DEPRECATED_$isGridSelection(e)&&(r=e.anchor.getNode(),h.DEPRECATED_$isGridCellNode(r)||j(41),r.append(...t))}function Qn(r,e,t,n){r.length===1&&h.DEPRECATED_$isGridNode(r[0])||j(42);var i=r[0];r=i.getChildren(),t=i.getFirstChildOrThrow().getChildrenSize();var o=i.getChildrenSize(),l=ne.$findMatchingParent(e.anchor.getNode(),f=>h.DEPRECATED_$isGridCellNode(f));e=(i=l&&ne.$findMatchingParent(l,f=>h.DEPRECATED_$isGridRowNode(f)))&&ne.$findMatchingParent(i,f=>h.DEPRECATED_$isGridNode(f)),h.DEPRECATED_$isGridCellNode(l)&&h.DEPRECATED_$isGridRowNode(i)&&h.DEPRECATED_$isGridNode(e)||j(43);var s=i.getIndexWithinParent(),c=Math.min(e.getChildrenSize()-1,s+o-1);o=l.getIndexWithinParent(),l=Math.min(i.getChildrenSize()-1,o+t-1),t=Math.min(o,l),i=Math.min(s,c),o=Math.max(o,l),s=Math.max(s,c),c=e.getChildren(),l=0;let u,g;for(let f=i;f<=s;f++){var d=c[f];h.DEPRECATED_$isGridRowNode(d)||j(24);var m=r[l];h.DEPRECATED_$isGridRowNode(m)||j(24),d=d.getChildren(),m=m.getChildren();let _=0;for(let T=t;T<=o;T++){let A=d[T];h.DEPRECATED_$isGridCellNode(A)||j(25);let X=m[_];h.DEPRECATED_$isGridCellNode(X)||j(25),f===i&&T===t?u=A.getKey():f===s&&T===o&&(g=A.getKey());let Oe=A.getChildren();X.getChildren().forEach(w=>{h.$isTextNode(w)&&h.$createParagraphNode().append(w),A.append(w)}),Oe.forEach(w=>w.remove()),_++}l++}u&&g&&(r=h.DEPRECATED_$createGridSelection(),r.set(e.getKey(),u,g),h.$setSelection(r),n.dispatchCommand(h.SELECTION_CHANGE_COMMAND,void 0))}function Zt(r,e,t,n=[]){let i=e!=null?t.isSelected(e):!0,o=h.$isElementNode(t)&&t.excludeFromCopy("html");var l=t;if(e!==null){var s=Ie.$cloneWithProperties(t);l=s=h.$isTextNode(s)&&e!=null?Ie.$sliceSelectedTextNodeContent(e,s):s}let c=h.$isElementNode(l)?l.getChildren():[];var u=l;s=u.exportJSON();var g=u.constructor;s.type!==g.getType()&&j(58,g.name);let d=s.children;for(h.$isElementNode(u)&&(Array.isArray(d)||j(59,g.name)),h.$isTextNode(l)&&(l=l.__text,0<l.length?s.text=l:i=!1),l=0;l<c.length;l++)u=c[l],g=Zt(r,e,u,s.children),!i&&h.$isElementNode(t)&&g&&t.extractWithChild(u,e,"clone")&&(i=!0);if(i&&!o)n.push(s);else if(Array.isArray(s.children))for(r=0;r<s.children.length;r++)n.push(s.children[r]);return i}function Qt(r,e){let t=[],n=h.$getRoot().getChildren();for(let i=0;i<n.length;i++)Zt(r,e,n[i],t);return{namespace:r._config.namespace,nodes:t}}function bt(r){let e=[];for(let t=0;t<r.length;t++){let n=h.$parseSerializedNode(r[t]);h.$isTextNode(n)&&Ie.$addNodeStyle(n),e.push(n)}return e}let ee=null;function ht(r,e){var t=qt?(r._window||window).getSelection():null;if(!t)return!1;var n=t.anchorNode;if(t=t.focusNode,n!==null&&t!==null&&!h.isSelectionWithinEditor(r,n,t)||(e.preventDefault(),e=e.clipboardData,n=h.$getSelection(),e===null||n===null))return!1;t=Xt(r),r=Vt(r);let i="";return n!==null&&(i=n.getTextContent()),t!==null&&e.setData("text/html",t),r!==null&&e.setData("application/x-lexical-editor",r),e.setData("text/plain",i),!0}W.$generateJSONFromSelectedNodes=Qt;W.$generateNodesFromSerializedNodes=bt;W.$getHtmlContent=Xt;W.$getLexicalContent=Vt;W.$insertDataTransferForPlainText=function(r,e){r=r.getData("text/plain")||r.getData("text/uri-list"),r!=null&&e.insertRawText(r)};W.$insertDataTransferForRichText=function(r,e,t){var n=r.getData("application/x-lexical-editor");if(n)try{let l=JSON.parse(n);if(l.namespace===t._config.namespace&&Array.isArray(l.nodes)){let s=bt(l.nodes);return we(t,s,e)}}catch{}if(n=r.getData("text/html"))try{var i=new DOMParser().parseFromString(n,"text/html"),o=Jt.$generateNodesFromDOM(t,i);return we(t,o,e)}catch{}if(r=r.getData("text/plain")||r.getData("text/uri-list"),r!=null)if(h.$isRangeSelection(e))for(r=r.split(/(\r?\n|\t)/),t=r.length,i=0;i<t;i++)o=r[i],o===`
`||o===`\r
`?e.insertParagraph():o==="	"?e.insertNodes([h.$createTabNode()]):e.insertText(o);else e.insertRawText(r)};W.$insertGeneratedNodes=we;W.copyToClipboard=async function(r,e){if(ee!==null)return!1;if(e!==null)return new Promise(l=>{r.update(()=>{l(ht(r,e))})});var t=r.getRootElement();let n=r._window==null?window.document:r._window.document,i=qt?(r._window||window).getSelection():null;if(t===null||i===null)return!1;let o=n.createElement("span");return o.style.cssText="position: fixed; top: -1000px;",o.append(n.createTextNode("#")),t.append(o),t=new Range,t.setStart(o,0),t.setEnd(o,1),i.removeAllRanges(),i.addRange(t),new Promise(l=>{let s=r.registerCommand(h.COPY_COMMAND,c=>(ne.objectKlassEquals(c,ClipboardEvent)&&(s(),ee!==null&&(window.clearTimeout(ee),ee=null),l(ht(r,c))),!0),h.COMMAND_PRIORITY_CRITICAL);ee=window.setTimeout(()=>{s(),ee=null,l(!1)},50),n.execCommand("copy"),o.remove()})};const bn=W;var ei=bn,Te=ei,_e=Tt,Y=k,a=v;function ft(r,e){return typeof document.caretRangeFromPoint<"u"?(r=document.caretRangeFromPoint(r,e),r===null?null:{node:r.startContainer,offset:r.startOffset}):document.caretPositionFromPoint!=="undefined"?(r=document.caretPositionFromPoint(r,e),r===null?null:{node:r.offsetNode,offset:r.offset}):null}let oe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ti=oe&&"documentMode"in document?document.documentMode:null,ri=oe&&"InputEvent"in window&&!ti?"getTargetRanges"in new window.InputEvent("input"):!1,ni=oe&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),ii=oe&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,oi=oe&&/^(?=.*Chrome).*/i.test(navigator.userAgent),li=oe&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!oi,ke=a.createCommand("DRAG_DROP_PASTE_FILE"),We=class er extends a.ElementNode{static getType(){return"quote"}static clone(e){return new er(e.__key)}constructor(e){super(e)}createDOM(e){let t=document.createElement("blockquote");return Y.addClassNamesToElement(t,e.theme.quote),t}updateDOM(){return!1}static importDOM(){return{blockquote:()=>({conversion:si,priority:0})}}exportDOM(e){if({element:e}=super.exportDOM(e),e&&Y.isHTMLElement(e)){this.isEmpty()&&e.append(document.createElement("br"));var t=this.getFormatType();e.style.textAlign=t,(t=this.getDirection())&&(e.dir=t)}return{element:e}}static importJSON(e){let t=Ge();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),type:"quote"}}insertNewAfter(e,t){e=a.$createParagraphNode();let n=this.getDirection();return e.setDirection(n),this.insertAfter(e,t),e}collapseAtStart(){let e=a.$createParagraphNode();return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}};function Ge(){return a.$applyNodeReplacement(new We)}let Je=class tr extends a.ElementNode{static getType(){return"heading"}static clone(e){return new tr(e.__tag,e.__key)}constructor(e,t){super(t),this.__tag=e}getTag(){return this.__tag}createDOM(e){let t=this.__tag,n=document.createElement(t);return e=e.theme.heading,e!==void 0&&Y.addClassNamesToElement(n,e[t]),n}updateDOM(){return!1}static importDOM(){return{h1:()=>({conversion:te,priority:0}),h2:()=>({conversion:te,priority:0}),h3:()=>({conversion:te,priority:0}),h4:()=>({conversion:te,priority:0}),h5:()=>({conversion:te,priority:0}),h6:()=>({conversion:te,priority:0}),p:e=>(e=e.firstChild,e!==null&&pt(e)?{conversion:()=>({node:null}),priority:3}:null),span:e=>pt(e)?{conversion:()=>({node:re("h1")}),priority:3}:null}}exportDOM(e){if({element:e}=super.exportDOM(e),e&&Y.isHTMLElement(e)){this.isEmpty()&&e.append(document.createElement("br"));var t=this.getFormatType();e.style.textAlign=t,(t=this.getDirection())&&(e.dir=t)}return{element:e}}static importJSON(e){let t=re(e.tag);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),tag:this.getTag(),type:"heading",version:1}}insertNewAfter(e,t=!0){e=e?e.anchor.offset:0,e=0<e&&e<this.getTextContentSize()?re(this.getTag()):a.$createParagraphNode();let n=this.getDirection();return e.setDirection(n),this.insertAfter(e,t),e}collapseAtStart(){let e=this.isEmpty()?a.$createParagraphNode():re(this.getTag());return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}extractWithChild(){return!0}};function pt(r){return r.nodeName.toLowerCase()==="span"?r.style.fontSize==="26pt":!1}function te(r){let e=r.nodeName.toLowerCase(),t=null;return(e==="h1"||e==="h2"||e==="h3"||e==="h4"||e==="h5"||e==="h6")&&(t=re(e),r.style!==null&&t.setFormat(r.style.textAlign)),{node:t}}function si(r){let e=Ge();return r.style!==null&&e.setFormat(r.style.textAlign),{node:e}}function re(r){return a.$applyNodeReplacement(new Je(r))}function ai(r,e){r.preventDefault(),e.update(()=>{let t=a.$getSelection(),n=r instanceof InputEvent||r instanceof KeyboardEvent?null:r.clipboardData;n!=null&&(a.$isRangeSelection(t)||a.DEPRECATED_$isGridSelection(t))&&Te.$insertDataTransferForRichText(n,t,e)},{tag:"paste"})}async function ui(r,e){await Te.copyToClipboard(e,Y.objectKlassEquals(r,ClipboardEvent)?r:null),e.update(()=>{let t=a.$getSelection();a.$isRangeSelection(t)?t.removeText():a.$isNodeSelection(t)&&t.getNodes().forEach(n=>n.remove())})}function ae(r){let e=null;if(r instanceof DragEvent?e=r.dataTransfer:r instanceof ClipboardEvent&&(e=r.clipboardData),e===null)return[!1,[],!1];var t=e.types;return r=t.includes("Files"),t=t.includes("text/html")||t.includes("text/plain"),[r,Array.from(e.files),t]}function mt(r){var e=a.$getSelection();if(!a.$isRangeSelection(e))return!1;let t=new Set;e=e.getNodes();for(let o=0;o<e.length;o++){var n=e[o],i=n.getKey();t.has(i)||(n=Y.$getNearestBlockElementAncestorOrThrow(n),i=n.getKey(),n.canIndent()&&!t.has(i)&&(t.add(i),r(n)))}return 0<t.size}function Ce(r){return r=a.$getNearestNodeFromDOMNode(r),a.$isDecoratorNode(r)}z.$createHeadingNode=re;z.$createQuoteNode=Ge;z.$isHeadingNode=function(r){return r instanceof Je};z.$isQuoteNode=function(r){return r instanceof We};z.DRAG_DROP_PASTE=ke;z.HeadingNode=Je;z.QuoteNode=We;z.eventFiles=ae;z.registerRichText=function(r){return Y.mergeRegister(r.registerCommand(a.CLICK_COMMAND,()=>{const e=a.$getSelection();return a.$isNodeSelection(e)?(e.clear(),!0):!1},0),r.registerCommand(a.DELETE_CHARACTER_COMMAND,e=>{const t=a.$getSelection();return a.$isRangeSelection(t)?(t.deleteCharacter(e),!0):!1},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.DELETE_WORD_COMMAND,e=>{const t=a.$getSelection();return a.$isRangeSelection(t)?(t.deleteWord(e),!0):!1},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.DELETE_LINE_COMMAND,e=>{const t=a.$getSelection();return a.$isRangeSelection(t)?(t.deleteLine(e),!0):!1},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.CONTROLLED_TEXT_INSERTION_COMMAND,e=>{const t=a.$getSelection();if(typeof e=="string")a.$isRangeSelection(t)?t.insertText(e):a.DEPRECATED_$isGridSelection(t);else{if(!a.$isRangeSelection(t)&&!a.DEPRECATED_$isGridSelection(t))return!1;const n=e.dataTransfer;n!=null?Te.$insertDataTransferForRichText(n,t,r):a.$isRangeSelection(t)&&(e=e.data)&&t.insertText(e)}return!0},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.REMOVE_TEXT_COMMAND,()=>{const e=a.$getSelection();return a.$isRangeSelection(e)?(e.removeText(),!0):!1},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.FORMAT_TEXT_COMMAND,e=>{const t=a.$getSelection();return a.$isRangeSelection(t)?(t.formatText(e),!0):!1},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.FORMAT_ELEMENT_COMMAND,e=>{var t=a.$getSelection();if(!a.$isRangeSelection(t)&&!a.$isNodeSelection(t))return!1;t=t.getNodes();for(const n of t)t=Y.$findMatchingParent(n,i=>a.$isElementNode(i)&&!i.isInline()),t!==null&&t.setFormat(e);return!0},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.INSERT_LINE_BREAK_COMMAND,e=>{const t=a.$getSelection();return a.$isRangeSelection(t)?(t.insertLineBreak(e),!0):!1},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.INSERT_PARAGRAPH_COMMAND,()=>{const e=a.$getSelection();return a.$isRangeSelection(e)?(e.insertParagraph(),!0):!1},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.INSERT_TAB_COMMAND,()=>(a.$insertNodes([a.$createTabNode()]),!0),a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.INDENT_CONTENT_COMMAND,()=>mt(e=>{const t=e.getIndent();e.setIndent(t+1)}),a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.OUTDENT_CONTENT_COMMAND,()=>mt(e=>{const t=e.getIndent();0<t&&e.setIndent(t-1)}),a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.KEY_ARROW_UP_COMMAND,e=>{var t=a.$getSelection();if(a.$isNodeSelection(t)&&!Ce(e.target)){if(e=t.getNodes(),0<e.length)return e[0].selectPrevious(),!0}else if(a.$isRangeSelection(t)&&(t=a.$getAdjacentNode(t.focus,!0),!e.shiftKey&&a.$isDecoratorNode(t)&&!t.isIsolated()&&!t.isInline()))return t.selectPrevious(),e.preventDefault(),!0;return!1},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.KEY_ARROW_DOWN_COMMAND,e=>{var t=a.$getSelection();if(a.$isNodeSelection(t)){if(e=t.getNodes(),0<e.length)return e[0].selectNext(0,0),!0}else if(a.$isRangeSelection(t)){let n=t.focus;if(n.key==="root"&&n.offset===a.$getRoot().getChildrenSize())return e.preventDefault(),!0;if(t=a.$getAdjacentNode(t.focus,!1),!e.shiftKey&&a.$isDecoratorNode(t)&&!t.isIsolated()&&!t.isInline())return t.selectNext(),e.preventDefault(),!0}return!1},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.KEY_ARROW_LEFT_COMMAND,e=>{const t=a.$getSelection();if(a.$isNodeSelection(t)){var n=t.getNodes();if(0<n.length)return e.preventDefault(),n[0].selectPrevious(),!0}return a.$isRangeSelection(t)&&_e.$shouldOverrideDefaultCharacterSelection(t,!0)?(n=e.shiftKey,e.preventDefault(),_e.$moveCharacter(t,n,!0),!0):!1},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.KEY_ARROW_RIGHT_COMMAND,e=>{const t=a.$getSelection();if(a.$isNodeSelection(t)&&!Ce(e.target)){var n=t.getNodes();if(0<n.length)return e.preventDefault(),n[0].selectNext(0,0),!0}return a.$isRangeSelection(t)?(n=e.shiftKey,_e.$shouldOverrideDefaultCharacterSelection(t,!1)?(e.preventDefault(),_e.$moveCharacter(t,n,!1),!0):!1):!1},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.KEY_BACKSPACE_COMMAND,e=>{if(Ce(e.target))return!1;const t=a.$getSelection();if(!a.$isRangeSelection(t))return!1;e.preventDefault(),{anchor:e}=t;const n=e.getNode();return t.isCollapsed()&&e.offset===0&&!a.$isRootNode(n)&&0<Y.$getNearestBlockElementAncestorOrThrow(n).getIndent()?r.dispatchCommand(a.OUTDENT_CONTENT_COMMAND,void 0):r.dispatchCommand(a.DELETE_CHARACTER_COMMAND,!0)},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.KEY_DELETE_COMMAND,e=>{if(Ce(e.target))return!1;const t=a.$getSelection();return a.$isRangeSelection(t)?(e.preventDefault(),r.dispatchCommand(a.DELETE_CHARACTER_COMMAND,!1)):!1},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.KEY_ENTER_COMMAND,e=>{const t=a.$getSelection();if(!a.$isRangeSelection(t))return!1;if(e!==null){if((ii||ni||li)&&ri)return!1;if(e.preventDefault(),e.shiftKey)return r.dispatchCommand(a.INSERT_LINE_BREAK_COMMAND,!1)}return r.dispatchCommand(a.INSERT_PARAGRAPH_COMMAND,void 0)},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.KEY_ESCAPE_COMMAND,()=>{const e=a.$getSelection();return a.$isRangeSelection(e)?(r.blur(),!0):!1},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.DROP_COMMAND,e=>{const[,t]=ae(e);if(0<t.length){var n=ft(e.clientX,e.clientY);if(n!==null){const{offset:o,node:l}=n;var i=a.$getNearestNodeFromDOMNode(l);if(i!==null){if(n=a.$createRangeSelection(),a.$isTextNode(i))n.anchor.set(i.getKey(),o,"text"),n.focus.set(i.getKey(),o,"text");else{const s=i.getParentOrThrow().getKey();i=i.getIndexWithinParent()+1,n.anchor.set(s,i,"element"),n.focus.set(s,i,"element")}n=a.$normalizeSelection__EXPERIMENTAL(n),a.$setSelection(n)}r.dispatchCommand(ke,t)}return e.preventDefault(),!0}return e=a.$getSelection(),!!a.$isRangeSelection(e)},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.DRAGSTART_COMMAND,e=>{[e]=ae(e);const t=a.$getSelection();return!(e&&!a.$isRangeSelection(t))},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.DRAGOVER_COMMAND,e=>{var[t]=ae(e);const n=a.$getSelection();return t&&!a.$isRangeSelection(n)?!1:(t=ft(e.clientX,e.clientY),t!==null&&(t=a.$getNearestNodeFromDOMNode(t.node),a.$isDecoratorNode(t)&&e.preventDefault()),!0)},a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.SELECT_ALL_COMMAND,()=>(a.$selectAll(),!0),a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.COPY_COMMAND,e=>(Te.copyToClipboard(r,Y.objectKlassEquals(e,ClipboardEvent)?e:null),!0),a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.CUT_COMMAND,e=>(ui(e,r),!0),a.COMMAND_PRIORITY_EDITOR),r.registerCommand(a.PASTE_COMMAND,e=>{const[,t,n]=ae(e);if(0<t.length&&!n)return r.dispatchCommand(ke,t),!0;if(a.isSelectionCapturedInDecoratorInput(e.target))return!1;const i=a.$getSelection();return a.$isRangeSelection(i)||a.DEPRECATED_$isGridSelection(i)?(ai(e,r),!0):!1},a.COMMAND_PRIORITY_EDITOR))};const ci=z;var di=ci,rr=M,gi=Gn,I=E,hi=qn,nr=k,_t=$t,fi=Vn,pi=di,qe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?I.useLayoutEffect:I.useEffect;function Ct(r){return r.getEditorState().read(hi.$canShowPlaceholderCurry(r.isComposing()))}function mi(r){let[e,t]=I.useState(()=>Ct(r));return qe(()=>{function n(){let i=Ct(r);t(i)}return n(),nr.mergeRegister(r.registerUpdateListener(()=>{n()}),r.registerEditableListener(()=>{n()}))},[r]),e}function _i(r,e){let[t,n]=I.useState(()=>r.getDecorators());return qe(()=>r.registerDecoratorListener(i=>{_t.flushSync(()=>{n(i)})}),[r]),I.useEffect(()=>{n(r.getDecorators())},[r]),I.useMemo(()=>{let i=[],o=Object.keys(t);for(let l=0;l<o.length;l++){let s=o[l],c=I.createElement(e,{onError:g=>r._onError(g)},I.createElement(I.Suspense,{fallback:null},t[s])),u=r.getElementByKey(s);u!==null&&i.push(_t.createPortal(c,u,s))}return i},[e,t,r])}function Ci(r){qe(()=>nr.mergeRegister(pi.registerRichText(r),fi.registerDragonSupport(r)),[r])}function Ni({content:r}){var[e]=rr.useLexicalComposerContext();e=mi(e);let t=gi();return e?typeof r=="function"?r(t):r:null}jt.RichTextPlugin=function({contentEditable:r,placeholder:e,ErrorBoundary:t}){let[n]=rr.useLexicalComposerContext();return t=_i(n,t),Ci(n),I.createElement(I.Fragment,null,r,I.createElement(Ni,{content:e}),t)};const Ei=jt;var $i=Ei,Xe={},Ti=M,Nt=k,K=v,vi=E;function Ri(r){var e=r.getNodes();if(0<Nt.$filter(e,t=>K.$isBlockElementNode(t)&&t.canIndent()?t:null).length)return!0;if(e=r.anchor,r=r.focus,r=r.isBefore(e)?r:e,e=r.getNode(),e=Nt.$getNearestBlockElementAncestorOrThrow(e),e.canIndent()){e=e.getKey();let t=K.$createRangeSelection();if(t.anchor.set(e,0,"element"),t.focus.set(e,0,"element"),t=K.$normalizeSelection__EXPERIMENTAL(t),t.anchor.is(r))return!0}return!1}function ir(r){return r.registerCommand(K.KEY_TAB_COMMAND,e=>{let t=K.$getSelection();return K.$isRangeSelection(t)?(e.preventDefault(),e=Ri(t)?e.shiftKey?K.OUTDENT_CONTENT_COMMAND:K.INDENT_CONTENT_COMMAND:K.INSERT_TAB_COMMAND,r.dispatchCommand(e,void 0)):!1},K.COMMAND_PRIORITY_EDITOR)}Xe.TabIndentationPlugin=function(){let[r]=Ti.useLexicalComposerContext();return vi.useEffect(()=>ir(r)),null};Xe.registerTabIndentation=ir;const xi=Xe;var Oi=xi,or={},Di=M,de=E;function Fe(){return Fe=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e],n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Fe.apply(this,arguments)}var yi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?de.useLayoutEffect:de.useEffect;or.ContentEditable=function({ariaActiveDescendant:r,ariaAutoComplete:e,ariaControls:t,ariaDescribedBy:n,ariaExpanded:i,ariaLabel:o,ariaLabelledBy:l,ariaMultiline:s,ariaOwns:c,ariaRequired:u,autoCapitalize:g,className:d,id:m,role:f="textbox",spellCheck:_=!0,style:T,tabIndex:A,"data-testid":X,...Oe}){let[w]=Di.useLexicalComposerContext(),[V,Ve]=de.useState(!1),lr=de.useCallback(De=>{w.setRootElement(De)},[w]);return yi(()=>(Ve(w.isEditable()),w.registerEditableListener(De=>{Ve(De)})),[w]),de.createElement("div",Fe({},Oe,{"aria-activedescendant":V?r:void 0,"aria-autocomplete":V?e:"none","aria-controls":V?t:void 0,"aria-describedby":n,"aria-expanded":V&&f==="combobox"?!!i:void 0,"aria-label":o,"aria-labelledby":l,"aria-multiline":s,"aria-owns":V?c:void 0,"aria-readonly":V?void 0:!0,"aria-required":u,autoCapitalize:g,className:d,contentEditable:V,"data-testid":X,id:m,ref:lr,role:f,spellCheck:_,style:T,tabIndex:A}))};const Mi=or;var Si=Mi;const Ai=()=>{const[r]=M.useLexicalComposerContext(),e=E.useRef(null),t=E.useCallback(n=>{var l;const i=typeof n=="number"?n:0,o=(l=r.getRootElement())==null?void 0:l.getBoundingClientRect();e.current.style.top=(o==null?void 0:o.y)+"px",e.current.style.left=((o==null?void 0:o.x)??0)+i+"px"},[r]);return E.useEffect(()=>{if(e.current)return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[t]),N.jsx("div",{className:"text-muted-foreground absolute pointer-events-none w-fit",ref:e,children:"Your note starts here..."})},Li=Ai,Pi=({save:r})=>{const[e]=M.useLexicalComposerContext();return E.useEffect(()=>{const t=e.registerUpdateListener(n=>{r(n.editorState.isEmpty()?"":JSON.stringify(n.editorState.toJSON()))});return()=>{t()}},[e,r]),null},Ii=r=>`is${r}`,wi=E.forwardRef(function({className:e,active:t,actions:n,...i},o){return N.jsx("div",{ref:o,className:sr("absolute p-[1px] rounded-md bg-background/50 backdrop-blur-lg border border-border text-sm font-light z-50",e),...i,children:n.map(({action:l,icon:s,key:c})=>{const u=Ii(c),g=t[u];return N.jsxs(ar,{children:[N.jsx(ur,{asChild:!0,onClick:l,children:N.jsx(hr,{variant:"ghost",size:"icon",className:`${g===!0?"bg-primary text-background":g===!1?"bg-transparent":"pointer-events-none bg-transparent text-muted-foreground"}`,children:s})}),N.jsx(cr,{children:u})]},c)})})}),ki=()=>{const[r,e]=E.useState(!1);return E.useEffect(()=>{const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("pointerdown",t),window.addEventListener("pointerup",n),()=>{window.removeEventListener("pointerdown",t),window.removeEventListener("pointerup",n)}},[]),{isPointerDown:r}},Fi=()=>{const[r]=M.useLexicalComposerContext(),{isPointerDown:e}=ki(),[t,n]=E.useState({isBold:!1,isCode:!1,isHighlight:!1,isItalic:!1,isStrikethrough:!1,isSubscript:!1,isSuperscript:!1,isUnderline:!1}),i=E.useRef(null),o=(d,m)=>d+(m-d)/2,l=E.useCallback(d=>{i.current.style.display="block",i.current.style.top=d.top-40+"px",i.current.style.left=o(d.left,d.right)-i.current.clientWidth/2+"px"},[]),s=E.useCallback(()=>{i.current.style.display="none"},[]),c=E.useCallback(d=>{const m=window.getSelection(),f=r.getRootElement();if(!m||!f||e)return;const _=dr(m,f);if(!_)return s();const T=d.hasFormat("subscript"),A=d.hasFormat("superscript");n({isBold:d.hasFormat("bold"),isCode:d.hasFormat("code"),isHighlight:d.hasFormat("highlight"),isItalic:d.hasFormat("italic"),isStrikethrough:d.hasFormat("strikethrough"),isSubscript:T?!0:A?null:!1,isSuperscript:A?!0:T?null:!1,isUnderline:d.hasFormat("underline")}),l(_)},[r,s,e,l]),u=E.useCallback(()=>{if(r.isComposing()||r.getRootElement()!==document.activeElement)return s();const d=v.$getSelection();if(!v.$isRangeSelection(d))return s();c(d)},[r,s,c]);E.useEffect(()=>{if(!i.current)return;r.getEditorState().read(u);const d=r.registerUpdateListener(({editorState:m})=>m.read(u));return()=>{d()}},[r,u,s,c]);const g=[{icon:N.jsx(fr,{className:"h-4 w-4"}),key:"Bold",action:()=>r.dispatchCommand(v.FORMAT_TEXT_COMMAND,"bold")},{icon:N.jsx(_r,{className:"h-4 w-4"}),key:"Italic",action:()=>r.dispatchCommand(v.FORMAT_TEXT_COMMAND,"italic")},{icon:N.jsx(pr,{className:"h-4 w-4"}),key:"Code",action:()=>r.dispatchCommand(v.FORMAT_TEXT_COMMAND,"code")},{icon:N.jsx(mr,{className:"h-4 w-4"}),key:"Highlight",action:()=>r.dispatchCommand(v.FORMAT_TEXT_COMMAND,"highlight")},{icon:N.jsx(Cr,{className:"h-4 w-4"}),key:"Strikethrough",action:()=>r.dispatchCommand(v.FORMAT_TEXT_COMMAND,"strikethrough")},{icon:N.jsx(Nr,{className:"h-4 w-4"}),key:"Subscript",action:()=>r.dispatchCommand(v.FORMAT_TEXT_COMMAND,"subscript")},{icon:N.jsx(Er,{className:"h-4 w-4"}),key:"Superscript",action:()=>r.dispatchCommand(v.FORMAT_TEXT_COMMAND,"superscript")},{icon:N.jsx($r,{className:"h-4 w-4"}),key:"Underline",action:()=>r.dispatchCommand(v.FORMAT_TEXT_COMMAND,"underline")}];return $t.createPortal(N.jsx(wi,{active:t,ref:i,actions:g}),document.body)},Ki=Fi,Hi={text:{bold:"font-bold",code:"font-mono",highlight:"bg-primary text-background",italic:"font-italic",strikethrough:"line-through",underline:"underline"}};function ji({editorState:r,save:e}){const t={namespace:"editor",onError:console.error,theme:Hi,editorState:r??void 0};return N.jsxs(sn.LexicalComposer,{initialConfig:t,children:[N.jsx($i.RichTextPlugin,{contentEditable:N.jsx("div",{className:"h-full w-full",children:N.jsx(Si.ContentEditable,{className:"outline-none"})}),placeholder:N.jsx(Li,{}),ErrorBoundary:fn}),N.jsx(Dr.AutoFocusPlugin,{}),N.jsx(jr.CheckListPlugin,{}),N.jsx(rn,{}),N.jsx(Hn.HorizontalRulePlugin,{}),N.jsx(Oi.TabIndentationPlugin,{}),N.jsx(vn.HistoryPlugin,{}),N.jsx(Pi,{save:e}),N.jsx(Ki,{})]})}export{ji as default};
